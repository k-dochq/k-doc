@import 'tailwindcss';

@theme {
  --color-primary: #f15bff;
  --color-primary-light: #fce4ff;
  --color-primary-200: #feefff;
  --color-primary-300: #fcdeff;
  --color-primary-400: #fbceff;
  --color-primary-500: #f8adff;
  --color-primary-600: #f58cff;
  --color-primary-700: #f47cff;
  --color-primary-800: #f26bff;
  --color-primary-900: #f15bff;
  --color-sub-900: #7657ff;
}

/* 베이스 토큰 */
:root {
  --press-alpha: 0.1; /* 눌림 불투명도 */
  --press-scale: 0.98; /* 살짝 줄어드는 압력감(선택) */
  --press-duration: 180ms;

  /* Safe Area 변수 - fallback 값 포함 */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
}

@layer base {
  button {
    cursor: pointer;
  }

  /* a 자체에 state layer - 모든 a 태그에 자동 적용 */
  a {
    position: relative;
    transition:
      transform var(--press-duration) ease,
      background-color var(--press-duration) ease;
    -webkit-tap-highlight-color: transparent;
  }

  a:where(:active, :focus-visible) {
    background: color-mix(in srgb, currentColor var(--press-alpha), transparent);
    transform: scale(var(--press-scale));
    outline: none;
  }

  /* 부모(카드/리스트 아이템)까지 눌린 듯 보이게 */
  @supports selector(:has(*)) {
    .item:has(> a:active),
    .item:has(> a:focus-visible) {
      background: color-mix(in srgb, currentColor var(--press-alpha), transparent);
      transform: scale(var(--press-scale));
    }
  }

  /* 모션을 줄이도록 설정한 사용자 배려 */
  @media (prefers-reduced-motion: reduce) {
    a,
    .item {
      transition: none;
      transform: none;
    }
  }
}

@layer utilities {
  .safe-area-pb {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .bg-gradient-primary {
    background: linear-gradient(180deg, #ffdbf9 0.19%, #c7a8ff 99.82%);
  }

  /* 모바일 브라우저 viewport height 문제 해결 */
  .min-h-screen-mobile {
    min-height: 100vh;
    min-height: 100dvh; /* Dynamic viewport height */
  }

  /* Bottom navigation을 위한 추가 안전장치 */
  .bottom-nav-safe {
    bottom: 0;
    bottom: env(safe-area-inset-bottom);
    padding-bottom: env(safe-area-inset-bottom);
  }
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-12px);
  }
}

@layer utilities {
  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  /* Radix UI Dialog 애니메이션 - data-state 기반 */
  [data-state='open'] {
    animation: fadeIn 0.3s ease-out;
  }

  [data-state='closed'] {
    animation: fadeOut 0.3s ease-in;
  }

  /* 모달 컨텐츠에 줌 효과 추가 */
  [data-radix-dialog-content][data-state='open'] {
    animation: zoomIn 0.3s ease-out;
  }

  [data-radix-dialog-content][data-state='closed'] {
    animation: zoomOut 0.3s ease-in;
  }

  /* 일반 클래스들 (fallback) */
  .animate-in {
    animation: fadeIn 0.3s ease-out;
  }

  .animate-out {
    animation: fadeOut 0.3s ease-in;
  }

  .fade-in-0 {
    animation: fadeIn 0.3s ease-out;
  }

  .fade-out-0 {
    animation: fadeOut 0.3s ease-in;
  }

  .zoom-in-95 {
    animation: zoomIn 0.3s ease-out;
  }

  .zoom-out-95 {
    animation: zoomOut 0.3s ease-in;
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes zoomIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes zoomOut {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

@keyframes fadePulse {
  0% {
    opacity: 0;
  }
  10% {
    opacity: 0.5;
  }
  20% {
    opacity: 1;
  }
  80% {
    opacity: 1;
  }
  90% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
  }
}
